mapboxgl.accessToken = 'pk.eyJ1IjoidW5kcC1wbmciLCJhIjoiY2t3azcycjRwMTRkczJubDV0MnYwaGxxdSJ9.t8Ig_87-rrruUWdJkSDoKw';
// Create a new map.
const vulnerabilityMap = new mapboxgl.Map({
  container: 'vulnerability-map',
  style: 'mapbox://styles/mapbox/light-v10',
  center: [149, -6.315],
  zoom: 5.3
});

vulnerabilityMap.addControl(new mapboxgl.FullscreenControl(), 'bottom-right');
vulnerabilityMap.addControl(new mapboxgl.NavigationControl(), 'bottom-left');
vulnerabilityMap.dragRotate.disable();
vulnerabilityMap.touchZoomRotate.disableRotation();

vulnerabilityMap.on('load', () => {

  vulnerabilityMap.addSource('hazards', {
    'type': 'raster',
    'tiles': [
      'https://db1.unepgrid.ch/geoserver/wms?bbox={bbox-epsg-3857}&service=WMS&version=1.1.1&styles=&request=GetMap&ZINDEX=10&srs=EPSG:3857&layers=preview:ml_risk&format=image/png8&transparent=true&height=512&width=512'
      ],
      'tileSize': 512,
  });

  vulnerabilityMap.addLayer({
    'id': 'hazards',
    'type': 'raster',
    'source': 'hazards',
    'layout': {
      'visibility': 'visible'
    }
  });
});
